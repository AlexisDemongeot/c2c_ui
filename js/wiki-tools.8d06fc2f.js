(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wiki-tools"],{"014b":function(t,e,i){"use strict";var s=i("e53d"),n=i("07e3"),a=i("8e60"),o=i("63b6"),r=i("9138"),l=i("ebfd").KEY,d=i("294c"),c=i("dbdb"),u=i("45f2"),f=i("62a0"),m=i("5168"),h=i("ccb9"),v=i("6718"),p=i("47ee"),g=i("9003"),_=i("e4ae"),b=i("f772"),y=i("36c3"),w=i("1bc3"),C=i("aebd"),x=i("a159"),k=i("0395"),$=i("bf0b"),E=i("d9f6"),P=i("c3a1"),T=$.f,S=E.f,N=k.f,M=s.Symbol,L=s.JSON,j=L&&L.stringify,O="prototype",V=m("_hidden"),D=m("toPrimitive"),I={}.propertyIsEnumerable,A=c("symbol-registry"),q=c("symbols"),F=c("op-symbols"),B=Object[O],R="function"==typeof M,Q=s.QObject,U=!Q||!Q[O]||!Q[O].findChild,W=a&&d(function(){return 7!=x(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(t,e,i){var s=T(B,e);s&&delete B[e],S(t,e,i),s&&t!==B&&S(B,e,s)}:S,G=function(t){var e=q[t]=x(M[O]);return e._k=t,e},z=R&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},H=function(t,e,i){return t===B&&H(F,e,i),_(t),e=w(e,!0),_(i),n(q,e)?(i.enumerable?(n(t,V)&&t[V][e]&&(t[V][e]=!1),i=x(i,{enumerable:C(0,!1)})):(n(t,V)||S(t,V,C(1,{})),t[V][e]=!0),W(t,e,i)):S(t,e,i)},J=function(t,e){_(t);var i,s=p(e=y(e)),n=0,a=s.length;while(a>n)H(t,i=s[n++],e[i]);return t},K=function(t,e){return void 0===e?x(t):J(x(t),e)},Y=function(t){var e=I.call(this,t=w(t,!0));return!(this===B&&n(q,t)&&!n(F,t))&&(!(e||!n(this,t)||!n(q,t)||n(this,V)&&this[V][t])||e)},X=function(t,e){if(t=y(t),e=w(e,!0),t!==B||!n(q,e)||n(F,e)){var i=T(t,e);return!i||!n(q,e)||n(t,V)&&t[V][e]||(i.enumerable=!0),i}},Z=function(t){var e,i=N(y(t)),s=[],a=0;while(i.length>a)n(q,e=i[a++])||e==V||e==l||s.push(e);return s},tt=function(t){var e,i=t===B,s=N(i?F:y(t)),a=[],o=0;while(s.length>o)!n(q,e=s[o++])||i&&!n(B,e)||a.push(q[e]);return a};R||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(i){this===B&&e.call(F,i),n(this,V)&&n(this[V],t)&&(this[V][t]=!1),W(this,t,C(1,i))};return a&&U&&W(B,t,{configurable:!0,set:e}),G(t)},r(M[O],"toString",function(){return this._k}),$.f=X,E.f=H,i("6abf").f=k.f=Z,i("355d").f=Y,i("9aa9").f=tt,a&&!i("b8e3")&&r(B,"propertyIsEnumerable",Y,!0),h.f=function(t){return G(m(t))}),o(o.G+o.W+o.F*!R,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)m(et[it++]);for(var st=P(m.store),nt=0;st.length>nt;)v(st[nt++]);o(o.S+o.F*!R,"Symbol",{for:function(t){return n(A,t+="")?A[t]:A[t]=M(t)},keyFor:function(t){if(!z(t))throw TypeError(t+" is not a symbol!");for(var e in A)if(A[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),o(o.S+o.F*!R,"Object",{create:K,defineProperty:H,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),L&&o(o.S+o.F*(!R||d(function(){var t=M();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))})),"JSON",{stringify:function(t){var e,i,s=[t],n=1;while(arguments.length>n)s.push(arguments[n++]);if(i=e=s[1],(b(e)||void 0!==t)&&!z(t))return g(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!z(e))return e}),s[1]=e,j.apply(L,s)}}),M[O][D]||i("35e8")(M[O],D,M[O].valueOf),u(M,"Symbol"),u(Math,"Math",!0),u(s.JSON,"JSON",!0)},"0395":function(t,e,i){var s=i("36c3"),n=i("6abf").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],r=function(t){try{return n(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?r(t):n(s(t))}},1784:function(t,e,i){"use strict";var s=i("db0c"),n=i.n(s),a=i("59ad"),o=i.n(a),r=i("5d73"),l=i.n(r),d=i("a4bb"),c=i.n(d),u=(i("a481"),i("7f7f"),i("28a5"),i("25c4")),f=i("188b"),m=i("dac7"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"field is-horizontal"},[i("div",{staticClass:"field-label is-normal"},[i("label",{staticClass:"label"},[i("marker-helper",{attrs:{name:t.helper}}),t._v("\n      "+t._s(t._f("uppercaseFirstLetter")(t.label))+"\n    ")],1)]),i("div",{staticClass:"field-body"},[i("div",{staticClass:"field",class:{"is-grouped is-grouped-multiline":t.isGrouped,"is-expanded":t.isExpanded,"is-narrow":t.isNarrow}},[t._t("default")],2)])])},v=[],p={props:{label:{type:String,default:""},alwaysVisible:{type:Boolean,default:!1},isGrouped:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isNarrow:{type:Boolean,default:!1},helper:{type:String,default:void 0}},data:function(){return{visible:!0,hasError:!1}},mounted:function(){var t=!0,e=!1,i=void 0;try{for(var s,n=l()(this.$children);!(t=(s=n.next()).done);t=!0){var a=s.value;a.$watch("visible",this.checkVisibility),a.$watch("hasError",this.checkHasError)}}catch(o){e=!0,i=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}this.checkVisibility(),this.checkHasError()},methods:{checkVisibility:function(){this.visible=this.alwaysVisible;var t=!0,e=!1,i=void 0;try{for(var s,n=l()(this.$children);!(t=(s=n.next()).done);t=!0){var a=s.value;a.visible&&(this.visible=this.visible||!0)}}catch(o){e=!0,i=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}},checkHasError:function(){this.hasError=!1;var t=!0,e=!1,i=void 0;try{for(var s,n=l()(this.$children);!(t=(s=n.next()).done);t=!0){var a=s.value;!0===a.hasError&&(this.hasError=!0)}}catch(o){e=!0,i=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}}}},g=p,_=i("2877"),b=Object(_["a"])(g,h,v,!1,null,null,null),y=b.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"activities"==t.field.name?i("input-activity",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{"has-error":t.hasError,"show-labels":""},model:{value:t.document.activities,callback:function(e){t.$set(t.document,"activities",e)},expression:"document.activities"}}):"orientations"==t.field.name?i("input-orientation",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],model:{value:t.document.orientations,callback:function(e){t.$set(t.document,"orientations",e)},expression:"document.orientations"}}):"main_waypoint_id"==t.field.name?i("div",{staticClass:"control select",class:{"is-danger":t.hasError}},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.document.main_waypoint_id,expression:"document.main_waypoint_id"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.document,"main_waypoint_id",e.target.multiple?i:i[0])}}},[i("option",{domProps:{value:null}}),t._l(t.document.associations.waypoints,function(e){return i("option",{key:e.document_id,domProps:{value:e.document_id}},[t._v("\n      "+t._s(t.$documentUtils.getDocumentTitle(e))+"\n    ")])})],2)]):"conditions_levels"==t.field.name?i("input-conditions-levels",{model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"markdown"==t.field.type?i("input-markdown",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{placeholder:t.placeholder},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"associations"==t.field.parent?i("input-document",{attrs:{"document-type":t.field.documentType,multiple:"","has-error":t.hasError},on:{add:function(e){return t.$documentUtils.propagateAssociationProperties(t.document,arguments[0])}},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):t.field.values&&t.field.multiple?i("input-multi-select",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{options:t.field.values,required:t.field.required,i18n:t.field.i18n,"i18n-context":t.field.i18nContext,"has-error":t.hasError},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"date"===t.field.type?i("input-date",{attrs:{"has-error":t.hasError,"disabled-dates":t.disabledDates,required:t.field.required},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):t.simpleInputType?i("input-simple",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"input",attrs:{prefix:t.prefix,"is-expanded":t.isExpanded,postfix:t.unit||t.field.unit,divisor:t.divisor,type:t.field.type,min:t.min||t.field.min,max:t.max||t.field.max,disabled:t.field.disabled,placeholder:t.placeholder||t.$gettext(t.field.name),required:t.field.required,i18n:t.field.i18n,"i18n-context":t.field.i18nContext,options:t.field.values,"has-error":t.hasError},on:{"click:prefix":function(e){return t.$emit("click:prefix")},input:function(e){return t.$emit("input",arguments[0])}},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"boolean"==t.field.type?i("input-yes-no",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{nullable:t.field.nullable},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"date_time"==t.field.type?i("input-datetime",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):i("div",{staticClass:"notification is-danger"},[t._v("\n  Unknown field type : "+t._s(t.field.type)+"\n")])},C=[],x=(i("6762"),i("2fdb"),i("c5f6"),i("a50d")),k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("table",[i("tr",[i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Location / elevation / orientation")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("soft snow")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("total snow")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")]),i("th")]),t._l(t.levels,function(e,s){return i("tr",{key:s},[i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.level_place,expression:"level.level_place"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_place},on:{input:function(i){i.target.composing||t.$set(e,"level_place",i.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.level_snow_height_soft,expression:"level.level_snow_height_soft"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_snow_height_soft},on:{input:function(i){i.target.composing||t.$set(e,"level_snow_height_soft",i.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.level_snow_height_total,expression:"level.level_snow_height_total"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_snow_height_total},on:{input:function(i){i.target.composing||t.$set(e,"level_snow_height_total",i.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.level_comment,expression:"level.level_comment"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_comment},on:{input:function(i){i.target.composing||t.$set(e,"level_comment",i.target.value)}}})]),i("td",[i("delete-button",{staticClass:"is-size-2 delete-button",on:{click:function(e){return t.levels.splice(s,1)}}})],1)])}),i("tr",[i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newLevel.level_place,expression:"newLevel.level_place"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.newLevel.level_place},on:{input:function(e){e.target.composing||t.$set(t.newLevel,"level_place",e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newLevel.level_snow_height_soft,expression:"newLevel.level_snow_height_soft"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.newLevel.level_snow_height_soft},on:{input:function(e){e.target.composing||t.$set(t.newLevel,"level_snow_height_soft",e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newLevel.level_snow_height_total,expression:"newLevel.level_snow_height_total"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.newLevel.level_snow_height_total},on:{input:function(e){e.target.composing||t.$set(t.newLevel,"level_snow_height_total",e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newLevel.level_comment,expression:"newLevel.level_comment"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.newLevel.level_comment},on:{input:function(e){e.target.composing||t.$set(t.newLevel,"level_comment",e.target.value)}}})]),i("td",[i("fa-icon",{staticClass:"is-size-2 add-button has-text-success",attrs:{icon:"plus-circle"},on:{click:t.addLevel}})],1)])],2)])},$=[],E=i("f499"),P=i.n(E),T={props:{value:{type:String,default:null}},data:function(){return{levels:[],newLevel:{}}},watch:{levels:{handler:"change",deep:!0}},created:function(){var t=this.value?JSON.parse(this.value):[],e=!0,i=!1,s=void 0;try{for(var n,a=l()(t);!(e=(n=a.next()).done);e=!0){var o=n.value;(o.level_place||o.level_place||o.level_place||o.level_place)&&this.levels.push(o)}}catch(r){i=!0,s=r}finally{try{e||null==a.return||a.return()}finally{if(i)throw s}}},methods:{change:function(){this.$emit("input",P()(this.levels))},addLevel:function(){this.levels.push(this.newLevel),this.newLevel={}}}},S=T,N=(i("f11a"),Object(_["a"])(S,k,$,!1,null,"7c1ff59a",null)),M=N.exports,L={components:{InputConditionsLevels:M},mixins:[x["c"],x["a"]],props:{prefix:{type:String,default:null},isExpanded:{type:Boolean,default:null},placeholder:{type:String,default:void 0},min:{type:String,default:void 0},max:{type:String,default:void 0},unit:{type:String,default:void 0},divisor:{type:Number,default:void 0}},computed:{disabledDates:function(){var t=this.min||this.field.min,e=this.max||this.field.max;return{to:t?this.$moment.parseDate(t).toDate():void 0,from:e?this.$moment.parseDate(e).add(1,"d").toDate():void 0}},editedLocale:function(){return this.document.locales[0]},object:function(){if("document"===this.field.parent)return this.document;if("locales"===this.field.parent)return this.editedLocale;if("associations"===this.field.parent)return this.document.associations;throw new Error("Unexpected parent value : ".concat(this.field.parent))},visible:function(){return this.field.isVisibleFor(this.document)},simpleInputType:function(){return["text","number","url","tel"].includes(this.field.type)},hasError:function(){return null!==this.field.error}}},j=L,O=Object(_["a"])(j,w,C,!1,null,null,null),V=O.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"section-item"},[i("div",{staticClass:"columns is-mobile section-header"},[i("div",{staticClass:"column"},[i("h2",{staticClass:"title is-2",class:{"has-text-danger":t.hasError}},[t._v("\n        "+t._s(t.title)+"\n      ")]),i("p",[i("em",[t._v(" "+t._s(t.subTitle)+" ")])])]),i("div",{staticClass:"column is-narrow"},[i("button",{staticClass:"button is-info",on:{click:t.toggleExpandedState}},[t._v("\n        "+t._s(t.expanded_?t.$gettext("Collapse"):t.$gettext("Expand"))+"\n      ")])])]),i("div",{ref:"content",staticClass:"section-content section-content-hidden"},[t._t("default")],2),i("hr")])},I=[],A={props:{title:{type:String,required:!0},subTitle:{type:String,default:"Lorem ipsum"}},data:function(){return{expanded_:!1,style:null,visible:!0,hasError:!1}},mounted:function(){this.style=document.createElement("style"),this.style.type="text/css",document.getElementsByTagName("head")[0].appendChild(this.style);var t=!0,e=!1,i=void 0;try{for(var s,n=l()(this.$children);!(t=(s=n.next()).done);t=!0){var a=s.value;a.$watch("visible",this.checkVisibility),a.$watch("hasError",this.checkHasError)}}catch(o){e=!0,i=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}this.checkVisibility(),this.checkHasError(),window.addEventListener("keyup",this.onKeyup)},beforeDestroy:function(){window.removeEventListener("keyup",this.onKeyup)},methods:{toggleExpandedState:function(){var t=this.$refs.content,e="section-content-expanded".concat(this._uid);this.expanded_?(this.style.innerHTML=".".concat(e," { max-height: ").concat(t.clientHeight,"px!important; }"),t.classList.add(e),setTimeout(function(){t.classList.add("section-content-hidden"),t.classList.remove(e)},0)):(this.style.innerHTML=".".concat(e," { max-height: ").concat(t.scrollHeight,"px!important; }"),t.classList.remove("section-content-hidden"),t.classList.add(e),setTimeout(function(){t.classList.remove(e)},301)),this.expanded_=!this.expanded_},onKeyup:function(t){t.altKey&&t.shiftKey&&("ArrowUp"===t.key&&this.expanded_?this.toggleExpandedState():"ArrowDown"!==t.key||this.expanded_||this.toggleExpandedState())},checkVisibility:function(){this.visible=!1;var t=!0,e=!1,i=void 0;try{for(var s,n=l()(this.$children);!(t=(s=n.next()).done);t=!0){var a=s.value;if(a.visible)return void(this.visible=!0)}}catch(o){e=!0,i=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}},checkHasError:function(){this.hasError=!1;var t=!0,e=!1,i=void 0;try{for(var s,n=l()(this.$children);!(t=(s=n.next()).done);t=!0){var a=s.value;!0===a.hasError&&(this.hasError=!0)}}catch(o){e=!0,i=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}}}},q=A,F=(i("bda5"),Object(_["a"])(q,D,I,!1,null,"a9dfe720",null)),B=F.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:t.noWrapper?"":"column"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[i("marker-helper",{attrs:{name:t.helper||t.field.helper}}),t._v("\n      "+t._s(t._f("uppercaseFirstLetter")(t.label||t.$gettext(t.field.name)))+"\n      "),t.hasError?i("span",{staticClass:"has-text-danger"},[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.errorMessage))+"\n      ")]):t._e()],1),i("form-input",{ref:"input",attrs:{document:t.document,field:t.field,helper:null,placeholder:t.placeholder,unit:t.unit,divisor:t.divisor,"is-expanded":t.isExpanded}})],1)])},Q=[],U={components:{FormInput:V},mixins:[x["c"],x["a"]],props:{isExpanded:{type:Boolean,default:!1},helper:{type:String,default:void 0},label:{type:String,default:void 0},placeholder:{type:String,default:" "},unit:{type:String,default:void 0},divisor:{type:Number,default:void 0},noWrapper:{type:Boolean,default:!1}},data:function(){return{visible:!0}},computed:{hasError:function(){return null!==this.field.error},errorMessage:function(){return this.hasError?this.$gettext(this.field.error.description):null}},mounted:function(){var t=this;this.$refs.input.$watch("visible",function(){t.visible=t.$refs.input.visible}),this.visible=this.$refs.input.visible}},W=U,G=Object(_["a"])(W,R,Q,!1,null,null,null),z=G.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.geomDetailEditable?i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"control upload-button"},[i("input",{ref:"gpxFileInput",attrs:{type:"file",accept:".gpx"},on:{change:t.uploadGpxTrack}}),i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary is-small",on:{click:function(e){return t.$refs.gpxFileInput.click()}}},[t._v("\n          Upload a GPS track\n        ")])])]),i("div",{staticClass:"column"},[i("em",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        You may also drag, draw or edit the track on the map.\n      ")])])]):t._e(),i("div",{staticClass:"columns is-multiline"},[i("div",{staticClass:"column is-12 map-container"},[i("map-view",{ref:"map",attrs:{"edited-document":t.document,"geom-detail-editable":t.geomDetailEditable,"show-center-on-geolocation":"","show-recenter-on":""}})],1),i("div",{staticClass:"column is-6"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v(t._s(t.$gettext("Longitude")))]),i("input-simple",{attrs:{type:"number",postfix:"°E"},on:{input:t.setGeometryPoint},model:{value:t.longitude,callback:function(e){t.longitude=e},expression:"longitude"}})],1)]),i("div",{staticClass:"column is-6"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v(t._s(t.$gettext("Latitude")))]),i("input-simple",{attrs:{type:"number",postfix:"°N"},on:{input:t.setGeometryPoint},model:{value:t.latitude,callback:function(e){t.latitude=e},expression:"latitude"}})],1)])])])},J=[],K=new m["a"].format.GeoJSON,Y="EPSG:4326",X="EPSG:3857",Z={components:{FormRow:y},mixins:[x["a"]],props:{geomDetailEditable:{type:Boolean,default:!1}},data:function(){return{latitude:null,longitude:null}},computed:{hasError:function(){return!1},visible:function(){return!0}},watch:{"document.geometry.geom":{handler:"setLatitudeLongitude",immediate:!0}},methods:{uploadGpxTrack:function(t){var e=new FileReader;e.onload=function(){this.$refs.map.setDocumentGeometryFromGpx(e.result)}.bind(this),e.readAsText(t.target.files[0]),this.$refs.gpxFileInput.value=""},setGeometryPoint:function(){if(null!==this.latitude&&null!==this.longitude){var t=o()(String(this.longitude).replace(",",".")),e=o()(String(this.latitude).replace(",",".")),i=new m["a"].geom.Point([t,e]);i.transform(Y,X),this.document.geometry.geom=K.writeGeometry(i)}},setLatitudeLongitude:function(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};var t=K.readGeometry(this.document.geometry.geom);t.transform(X,Y);var e=t.getCoordinates();this.longitude=Math.round(1e6*e[0])/1e6,this.latitude=Math.round(1e6*e[1])/1e6}}},tt=Z,et=(i("67d2"),Object(_["a"])(tt,H,J,!1,null,"c6c7e28a",null)),it=et.exports,st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.document?i("div",{staticClass:"section",class:{preview:t.isPreview}},[i("div",{staticClass:"has-edition-width"},[i("h1",{staticClass:"title is-1"},[i("icon-edit"),"edit"===t.mode?i("span",[i("html-header",{attrs:{title:t.$gettext("Edit a document")}}),i("document-title",{attrs:{document:t.document}}),i("span",{staticClass:"is-size-5"},[t._v(" ("+t._s(t.$language.available[t.$route.params.lang])+")")])],1):i("span",[i("html-header",{attrs:{title:t.$documentUtils.getCreationTitle(t.documentType)}}),t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.$documentUtils.getCreationTitle(t.documentType)))+"\n        "),i("span",[i("dropdown-button",[i("span",{staticClass:"button",attrs:{slot:"button"},slot:"button"},[i("span",[t._v("\n                "+t._s(t.$language.available[t.document.locales[0].lang])+" \n              ")]),i("fa-icon",{attrs:{icon:"angle-down","aria-hidden":"true"}})],1),t._l(Object.keys(t.$language.available),function(e){return i("div",{key:e,staticClass:"dropdown-item has-hover-background has-cursor-pointer",on:{click:function(i){t.document.locales[0].lang=e}}},[t._v("\n              "+t._s(t.$language.available[e])+"\n            ")])})],2)],1)],1),i("button",{staticClass:"button is-size-6 is-pulled-right",on:{click:function(e){t.isPreview=!t.isPreview}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isPreview,expression:"isPreview"}]},[i("fa-icon",{attrs:{icon:"edit"}}),i("span",[t._v(" ")]),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Back to edit mode")])],1),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}]},[i("fa-icon",{attrs:{icon:"eye"}}),i("span",[t._v(" ")]),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Preview")])],1)])],1),i("div",{staticStyle:{clear:"both"}}),t._l(t.genericErrors,function(e,s){return i("div",{key:s,staticClass:"has-text-danger has-text-weight-bold"},[t._v("\n      "+t._s(e.name)+"\n      :\n      "+t._s(e.description)+"\n    ")])})],2),t.isPreview?i(t.documentType+"-view",{tag:"component",attrs:{draft:t.document}}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}],staticClass:"has-edition-width"},[i("hr"),t._t("default",[t._v("\n      ...\n    ")]),i("save-document-row",{attrs:{"is-loading":t.isLoading},on:{save:function(e){return t.$emit("save",arguments[0])},preview:function(e){t.isPreview=!0}}}),["map","profile"].includes(t.documentType)?t._e():i("quality-input-row",{attrs:{document:t.document}})],2)],1):t._e()},nt=[],at=i("9f3f"),ot=i("9b99"),rt=i("62d5"),lt=i("4947"),dt=i("b32b"),ct=i("e78b"),ut=i("d83c"),ft=i("a790"),mt=i("d1c3"),ht=i("cece"),vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t.automaticComputationAvailable?i("input-yes-no",{attrs:{prefix:t.$gettext("quality"),"label-yes":t.$gettext("Automatic","quality computation"),"label-no":t.$gettext("Manual","quality computation")},model:{value:t.autoComputeQuality,callback:function(e){t.autoComputeQuality=e},expression:"autoComputeQuality"}}):i("span",[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.$gettext("quality")))+"\n      ")])],1)]),i("div",{staticClass:"field quality-select-container"},[t.autoComputeQuality&&t.automaticComputationAvailable?i("input-simple",{attrs:{options:t.$options.quality_types,i18n:"","i18n-context":"quality_types",value:t.computedQuality,disabled:""}}):i("input-simple",{attrs:{options:t.$options.quality_types,i18n:"","i18n-context":"quality_types",required:""},model:{value:t.manualQuality,callback:function(e){t.manualQuality=e},expression:"manualQuality"}})],1)])},pt=[];i("386d");function gt(t,e){var i=!0,s=!1,n=void 0;try{for(var a,o=l()(e);!(i=(a=o.next()).done);i=!0){var r=a.value;if(t.activities.includes(r))return!0}}catch(d){s=!0,n=d}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}return!1}function _t(t,e){return t.geometry&&t.geometry.geom_detail||e.route_description}function bt(t,e){if(e.conditions)return!0;if(!e.conditions_levels)return!1;var i=JSON.parse(e.conditions_levels);return!(!i||0===i.length||!(i[0].level_place||i[0].level_comment||i[0].level_snow_height_total||i[0].level_snow_height_soft))}function yt(t){return t.elevation_up_snow||t.elevation_down_snow||t.snow_quantity||t.snow_quality||t.length_total||t.glacier_rating}function wt(t,e){var i=0;return i+=t.geometry&&t.geometry.geom?1:0,i+=t.activities&&t.activities.length?.5:0,i+=t.categories&&t.categories.length?.5:0,i+=t.associations.waypoints.length||t.associations.routes.length?1:0,i+=e.title?1:0,i+=e.description?1:0,i}function Ct(t,e){var i=e.description||"",s=0;return s+=t.associations.waypoints.length?1:0,s+=t.associations.images.length?1:0,s+=e.summary?1:0,s+=i?1:-1,s+=-1!==i.search(/(^|\n)##/g)?1:0,s+=-1!==i.search(/\[img=/g)?1:0,s}function xt(t,e){function i(){var i=0;return i+=_t(t,e)?.5:0,i+=yt(t)?.5:0,t.access_condition&&"snowy"!==t.access_condition&&t.elevation_access?i+=.5:"snowy"===t.access_condition&&t.elevation_access&&e.access_comment&&(i+=.5),i+="no"!==t.avalanche_signs&&e.avalanches?.5:0,i+=e.description?.5:0,i+=e.weather?.5:0,i+=t.condition_rating?.5:0,i=bt(t,e)?i+1:Math.min(i,2),i}function s(){var i=0;return i+=_t(t,e)?.5:0,i+=t.condition_rating?.5:0,i+=e.description?1:0,i+=e.timing?.5:0,i+=e.weather?.5:0,i=bt(t,e)?i+1.5:Math.min(i,2),i}function n(){var i=0;return i+=_t(t,e)?.5:0,i+=e.description?1:0,i+=e.timing?.5:0,i+=e.weather?.5:0,i=e.conditions?i+2:Math.min(i,2),i}var a=0,o=0,r=0;return gt(t,["skitouring","snowshoeing"])&&(a=i()),gt(t,["snow_ice_mixed","ice_climbing","mountain_climbing"])&&(o=s()),gt(t,["rock_climbing","hiking","mountain_biking","via_ferrata","paragliding","slacklining"])&&(r=n()),Math.max(a,o,r)}var kt={components:{FormRow:y},props:{document:{type:Object,default:null}},data:function(){return{autoComputeQuality:!0,computedQuality:"empty",manualQuality:null}},computed:{editedLocale:function(){return this.document?this.document.locales[0]:null},automaticComputationAvailable:function(){return["o","c","i"].includes(this.document.type)}},watch:{document:{handler:"computeQuality",deep:!0,immediate:!0},autoComputeQuality:"storeQuality",manualQuality:"storeQuality"},methods:{storeQuality:function(){this.document.quality=this.autoComputeQuality&&this.automaticComputationAvailable?this.computedQuality:this.manualQuality},computeQuality:function(){if(!this.document)return null;null===this.manualQuality&&(this.manualQuality=this.document.quality);var t=this.document.quality;"o"===this.document.type?t=xt(this.document,this.editedLocale):"c"===this.document.type?t=Ct(this.document,this.editedLocale):"i"===this.document.type&&(t=wt(this.document,this.editedLocale)),this.computedQuality=t<1?"empty":t<2?"draft":t<3?"medium":t<4?"fine":"great",this.storeQuality()}},quality_types:u["a"].quality_types},$t=kt,Et=(i("b7ea"),Object(_["a"])($t,vt,pt,!1,null,"4cbb20c8",null)),Pt=Et.exports,Tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"columns is-mobile is-multiline"},[i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"control"},[i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-loading":t.isLoading},on:{click:function(e){return t.$emit("save",t.comment)}}},[t._v("\n        Save\n      ")])])]),i("div",{staticClass:"column is-narrow"},[i("button",{staticClass:"button",on:{click:function(e){return t.$emit("preview")}}},[i("fa-icon",{attrs:{icon:"eye"}}),i("span",[t._v(" ")]),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Preview")])],1)]),i("div",{staticClass:"column is-12-mobile"},[i("div",{staticClass:"control is-expanded"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"input",attrs:{type:"text",disabled:"edit"!==t.mode,placeholder:t.$gettext("comment")},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])])])},St=[],Nt={props:{isLoading:{type:Boolean,required:!0}},data:function(){return{comment:""}},computed:{mode:function(){return this.$route.name.split("-")[1]}}},Mt=Nt,Lt=Object(_["a"])(Mt,Tt,St,!1,null,null,null),jt=Lt.exports,Ot={components:{FormRow:y,AreaView:at["a"],ArticleView:ot["a"],BookView:rt["a"],ImageView:lt["a"],MapView:dt["a"],OutingView:ct["a"],ProfileView:ht["a"],RouteView:ut["a"],WaypointView:ft["a"],XreportView:mt["a"],QualityInputRow:Pt,SaveDocumentRow:jt},props:{document:{type:Object,default:null},genericErrors:{type:Array,required:!0},mode:{type:String,required:!0},isLoading:{type:Boolean,required:!0}},data:function(){return{isPreview:!1}},computed:{documentType:function(){return this.$documentUtils.getDocumentType(this.document.type)}},watch:{$route:"reset"},methods:{reset:function(){this.isPreview=!1}}},Vt=Ot,Dt=(i("ae0a"),Object(_["a"])(Vt,st,nt,!1,null,"e020d376",null)),It=Dt.exports,At=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"columns is-multiline"},[i("div",{staticClass:"column is-narrow"},[i("label",{staticClass:"label"},[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.label||t.$gettext(t.field.name)))+"\n        "),i("marker-helper",{attrs:{name:t.helper?t.helper:t.field.helper}})],1)]),i("div",{staticClass:"column is-narrow"},[i("form-input",{ref:"input",staticClass:"is-expanded",attrs:{document:t.document,field:t.field}})],1)]),i("div",{staticClass:"columns is-multiline"},t._l(t.document.associations[t.field.name],function(e){return i("div",{key:e.document_id,staticClass:"column is-4"},[i("document-card",{attrs:{document:e,"show-delete-button":"","not-clickable":""},on:{delete:function(i){return t.$documentUtils.removeAssociation(t.document,e)}}})],1)}),0)])},qt=[],Ft={components:{FormInput:V},mixins:[x["c"],x["a"]],props:{label:{type:String,default:null},helper:{type:String,default:void 0}},computed:{visible:function(){return this.$refs.input.visible},hasError:function(){return null!==this.field.error}}},Bt=Ft,Rt=Object(_["a"])(Bt,At,qt,!1,null,null,null),Qt=Rt.exports,Ut=new m["a"].format.GeoJSON,Wt="EPSG:4326",Gt="EPSG:3857";e["a"]={components:{FormRow:y,FormSection:B,FormField:z,FormInput:V,MapInputRow:it,EditionContainer:It,AssociationsInputRow:Qt},data:function(){return{promise:{},fields:null,genericErrors:[],saving:!1,modified:!1}},computed:{mode:function(){return this.$route.name.split("-")[1]},documentType:function(){return this.$route.name.replace(/-(edit|add)/,"")},documentId:function(){return this.$route.params.id},lang:function(){return this.$route.params.lang},document:function(){return this.promise.data},editedLocale:function(){return this.document?this.document.locales[0]:null}},watch:{$route:{handler:"load",immediate:!0},"document.geometry.geom":"setLatitudeLongitude"},beforeRouteEnter:function(t,e,i){i(function(t){t.$user.isLogged||t.$router.push({name:"auth"})})},beforeRouteLeave:function(t,e,i){if(this.modified){var s=window.confirm(this.$gettext("Do you really want to leave? you have unsaved changes!"));s?i():i(!1)}else i()},methods:{load:function(){var t=this;if(this.fields=u["a"].objectDefinitions[this.documentType].fields,this.cleanErrors(),this.latitude=null,this.longitude=null,this.$user.isLogged)if("edit"===this.mode)this.promise=f["a"][this.documentType].get(this.documentId,this.lang).then(function(e){var i=e.data.locales;0===i.length&&i.push(t.$documentUtils.buildLocale(t.documentType,t.lang)),t.afterLoad(e),t.modified=!0});else{this.promise={data:this.$documentUtils.buildDocument(this.documentType,this.lang)},"outing"===this.documentType&&f["a"].profile.get(this.$user.id).then(function(e){t.$documentUtils.addAssociation(t.document,e.data)});for(var e=0,i=c()(this.$route.query);e<i.length;e++){var s=i[e],n=this.$documentUtils.getDocumentType(s);if(n&&this.$route.query[s]){var a=String(this.$route.query[s]).split(","),o=!0,r=!1,d=void 0;try{for(var m,h=l()(a);!(o=(m=h.next()).done);o=!0){var v=m.value;f["a"][n].get(v).then(function(e){t.$documentUtils.addAssociation(t.document,e.data)})}}catch(p){r=!0,d=p}finally{try{o||null==h.return||h.return()}finally{if(r)throw d}}}}this.$route.query.act&&(this.document.activities=this.$route.query.act.split(",")),this.afterLoad(),this.modified=!0}},setGeometryPoint:function(){if(null!==this.latitude&&null!==this.longitude){var t=o()(String(this.longitude).replace(",",".")),e=o()(String(this.latitude).replace(",",".")),i=new m["a"].geom.Point([t,e]);i.transform(Wt,Gt),this.document.geometry.geom=Ut.writeGeometry(i)}},setLatitudeLongitude:function(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};var t=Ut.readGeometry(this.document.geometry.geom);t.transform(Gt,Wt);var e=t.getCoordinates();this.longitude=Math.round(1e6*e[0])/1e6,this.latitude=Math.round(1e6*e[1])/1e6},afterLoad:function(){},beforeSave:function(){},displayErrors:function(t){var e=this,i=this.getFieldsWithError(),s=t?"API message":void 0;if(0!==i.length){var n=i.map(function(t){return"".concat(e.$gettext(t.name)," : ").concat(e.$gettext(t.error.description,s))});return this.$alert.show(n),!0}return!1},save:function(t){var e,i=this;(this.beforeSave(),this.computeErrors(),this.displayErrors(!1))||(this.saving=!0,e="edit"===this.mode?f["a"][this.documentType].save(this.document,t).then(function(){i.modified=!1,i.goToDocument(i.document.document_id)}):f["a"][this.documentType].create(this.document).then(function(t){i.modified=!1,i.goToDocument(t.data.document_id)}),e.catch(function(t){i.saving=!1;var e=t.response.data;i.dispatchErrors(e.errors)}))},goToDocument:function(t){this.$router.push({name:this.documentType,params:{id:t,lang:this.lang}})},computeErrors:function(){for(var t=0,e=n()(this.fields);t<e.length;t++){var i=e[t];i.error=i.getError(this.document,this.editedLocale)}},getFieldsWithError:function(){return n()(this.fields).filter(function(t){return null!==t.error})},dispatchErrors:function(t){this.cleanErrors();var e=!0,i=!1,s=void 0;try{for(var n,a=l()(t);!(e=(n=a.next()).done);e=!0){var o=n.value,r=o.name.split(".");"locales"===r[0]?this.dispatchError(r[2],o):"associations"===r[0]?this.dispatchError(r[1],o):this.dispatchError(r[0],o)}}catch(d){i=!0,s=d}finally{try{e||null==a.return||a.return()}finally{if(i)throw s}}this.displayErrors(!0)},dispatchError:function(t,e){void 0===this.fields[t]?this.genericErrors.push(e):this.fields[t].error=e},cleanErrors:function(){this.genericErrors=[];for(var t=0,e=n()(this.fields);t<e.length;t++){var i=e[t];i.error=null}}}}},"19d5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.categories}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1),i("map-input-row",{attrs:{document:t.document}}),i("hr")],1)},n=[],a=i("1784"),o={mixins:[a["a"]]},r=o,l=i("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=d.exports},"1c08":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Title of the book, author, language and date of publication.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.book_types}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.langs}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.editor}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.publication_date}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_pages}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.isbn}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.url}})],1)]),i("form-section",{attrs:{title:t.$gettext("description"),"sub-title":t.$gettext("Book content")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1)]),i("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("Articles, waypoints or routes to be linked.")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}})],1)],1)},n=[],a=i("1784"),o={mixins:[a["a"]]},r=o,l=i("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=d.exports},2189:function(t,e,i){},"257e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{attrs:{document:t.document,field:t.fields.title,"is-expanded":""}}),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.article_type}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.categories}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1),i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.outings}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}}),i("hr")],1)},n=[],a=i("1784"),o={mixins:[a["a"]]},r=o,l=i("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=d.exports},"2fea":function(t,e,i){"use strict";var s=i("fc29"),n=i.n(s);n.a},"44ec":function(t,e,i){"use strict";var s=i("7c55"),n=i.n(s);n.a},"47ee":function(t,e,i){var s=i("c3a1"),n=i("9aa9"),a=i("355d");t.exports=function(t){var e=s(t),i=n.f;if(i){var o,r=i(t),l=a.f,d=0;while(r.length>d)l.call(t,o=r[d++])&&e.push(o)}return e}},"545b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("General information"),"sub-title":t.$gettext("Report title, activity, linked routes or outings.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}})],1),i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.outings}})],1),i("form-section",{attrs:{title:t.$gettext("Geolocation"),"sub-title":t.$gettext("Precise location of the event.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-3",attrs:{document:t.document,field:t.fields.elevation}})],1),i("map-input-row",{attrs:{document:t.document}})],1),i("form-section",{attrs:{title:t.$gettext("Participants and context"),"sub-title":t.$gettext("Details on participants and event context")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.date}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_participants}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.event_type}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_impacted}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.severity}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rescue}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.avalanche_level}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.avalanche_slope}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.age}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.gender}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author_status}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.autonomy}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.activity_rate}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_outings}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.previous_injuries}})],1)]),i("form-section",{attrs:{title:t.$gettext("Narration"),"sub-title":t.$gettext("Open fields to deeply explain the event circumstances.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,placeholder:t.$gettext("Details of the actual outing and the incident. If you have already written up your outing, you only need to describe the incident, then link it to your outing report (after first uploading it)")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.anonymous}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.place,placeholder:t.$gettext("Information on the location of the incident. Mark the location on the map above, even if you cannot do very accurately, (in which case give more details here). After completing the report, you can associate it to a route, a climbing site or an outing.")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_study,placeholder:t.$gettext("Maps, guidebooks and outings reports consulted. Evaluation of the route during the outing.")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions,placeholder:t.$gettext("Describe the information gathered before the outing and how these evolved once on route: weather forecast, avalanche risk reports, amount of refreezing, condition of the snow/ice/rock, reports from the previous days, etc.")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.training,placeholder:t.$gettext("At the time of the incident, describe your technical level, your physical condition, how tired you had become just prior to the incident, and, if at altitude, how well you were acclimatized, etc.")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.motivations,placeholder:t.$gettext("Why did you choose this outing? When did you decide to engage. What influenced your decision (holiday time, long journey, hotel/hut bookings, time spent already in preparation, limited possibilities, etc.)?")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.group_management,placeholder:t.$gettext("Communication of the individual objectives and expectations, the thoughts and observations during the outing, discussions on new strategies, the way the group conducted itself and divided responsibilities, was the group used to working together, core aspirations, etc.")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.risk,placeholder:t.$gettext("Have you (re)evaluated the risks at each change in the situation? What factors might have affected your awareness, such as tiredness, stress, relaxing having passed the main difficulties or on the descent, on a section reputed to be easy, presence of footprints or other people, complete confidence in the leader of the group, etc.")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.time_management,placeholder:t.$gettext("Had a timetable for the route been foreseen? Did you maintain the schedule? Was time a factor in causing the incident?")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.safety,placeholder:t.$gettext("Types of belay and protection used, verifications between climbers, snowpack stability tests, testing of avalanche transceivers, etc.")}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.reduce_impact}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.increase_impact}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.modifications}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.other_comments,placeholder:t.$gettext("Briefly describe any injuries. Comments that do not fit into any other fields can be entered here.")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.disable_comments}})],1)])],1)},n=[],a=i("1784"),o={mixins:[a["a"]]},r=o,l=i("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=d.exports},"596f":function(t,e,i){},"5bf5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.title}}),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.area_type}})],1),t.$user.isModerator?i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}}):t._e(),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1),i("hr")],1)},n=[],a=i("1784"),o={mixins:[a["a"]],methods:{beforeSave:function(){this.$user.isModerator||delete this.document.geometry}}},r=o,l=i("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=d.exports},"5d58":function(t,e,i){t.exports=i("d8d6f")},"5edb":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{staticClass:"edition-container",attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Waypoint's main properties")}},[i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.waypoint_type}}),i("form-field",{attrs:{document:t.document,field:t.fields.title}})],1),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_min}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.prominence}})],1),i("map-input-row",{attrs:{document:t.document}}),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.maps_info,label:t.$gettext("maps_references"),placeholder:t.$gettext("Add here maps not automatically referenced")}})],1)],1),i("form-section",{attrs:{title:t.$gettext("Transport & road or PT access"),"sub-title":t.$gettext("Informations about the access")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.snow_clearance_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.lift_access}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.public_transportation_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.parking_fee}}),i("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.public_transportation_types}})],1)]),i("form-section",{attrs:{title:t.$gettext("Types and styles"),"sub-title":t.$gettext("...")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_outdoor_types}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_indoor_types}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_styles}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.rock_types}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.best_periods}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.orientations}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.access_time}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rain_proof}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.children_proof}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ground_types}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.product_types}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_types}})],1)]),i("form-section",{attrs:{title:t.$gettext("Numbers"),"sub-title":t.$gettext("Misc data about the waypoint")}},[i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.length}}),i("form-field",{attrs:{document:t.document,field:t.fields.slope}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.custodianship}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.capacity_staffed}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.capacity}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.url}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.phone}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.phone_custodian}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.matress_unstaffed}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.blanket_unstaffed}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.gas_unstaffed}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.heating_unstaffed}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_min}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_median}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_max}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.routes_quantity}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_length_max}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_length_min}})],1)]),i("form-section",{attrs:{title:t.$gettext("ratings"),"sub-title":t.$gettext("Associated routes cotations")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.exposition_rating}}),i("form-field",{attrs:{document:t.document,field:t.fields.climbing_rating_min}}),i("form-field",{attrs:{document:t.document,field:t.fields.climbing_rating_median}}),i("form-field",{attrs:{document:t.document,field:t.fields.climbing_rating_max}})],1),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.equipment_ratings}}),i("form-field",{attrs:{document:t.document,field:t.fields.paragliding_rating}})],1)]),i("form-section",{attrs:{title:t.$gettext("Description"),"sub-title":t.$gettext("Waypoint's textual description")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary,placeholder:t.$gettext("write a summary")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.access_period,placeholder:t.accessPeriodPlaceholder,label:t.accessPeriodTitle}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,placeholder:t.descriptionPlaceholder}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.access,placeholder:t.accessPlaceholder,label:t.accessTitle}})],1)]),i("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("You may add associated waypoints, books and articles")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)},n=[],a=i("1784"),o=i("8a7f"),r={mixins:[a["a"],o["a"]]},l=r,d=i("2877"),c=Object(d["a"])(l,s,n,!1,null,null,null);e["default"]=c.exports},6375:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Main information about the route, such as title, activity, GPS, and waypoint (which mountain, place).")}},[i("div",{staticClass:"columns is-1"},[i("form-field",{staticClass:"is-narrow",attrs:{label:t.$gettext("waypoint"),document:t.document,field:t.fields.main_waypoint_id}}),i("form-field",{attrs:{document:t.document,field:t.fields.title}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.climbing_outdoor_type}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}})],1),i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.xreports}})],1),i("form-section",{attrs:{title:t.$gettext("configuration"),"sub-title":t.$gettext("Data like orientation, rock type, route type (such as return trip or loop) and route configuration type (such as ridge or gully).")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.orientations}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_types}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.configuration}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.rock_types}})],1)]),i("form-section",{attrs:{title:t.$gettext("numbers"),"sub-title":t.$gettext("Information about the terrain, like elevations, lengths...")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_min}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_max}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_up}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_down}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_access}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_difficulties}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.difficulties_height}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.route_length}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_length_asphalt}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_length_trail}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_height_diff_portages}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.lift_access}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.durations}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_type}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_height}})],1)]),i("form-section",{attrs:{title:t.$gettext("ratings"),"sub-title":t.$gettext("Everything about ratings : difficulties, exposition...")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.global_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.rock_free_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.rock_required_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.aid_rating}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.labande_global_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.labande_ski_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ski_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ski_exposition}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slope}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ice_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.mixed_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.snowshoe_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.via_ferrata_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.hiking_rating}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{attrs:{document:t.document,field:t.fields.mtb_down_rating}}),i("form-field",{attrs:{document:t.document,field:t.fields.mtb_up_rating}}),i("form-field",{attrs:{document:t.document,field:t.fields.hiking_mtb_exposition}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.equipment_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.engagement_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.exposition_rock_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.risk_rating}})],1)]),i("form-section",{attrs:{title:t.$gettext("Comments"),"sub-title":t.$gettext("This is where you may describe the route extensively, maybe starting with a brief summary and then developing the description (including approach, descent, etc.). Don't forget to mention the route history if you know it.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_history,placeholder:t.$gettext("Describe historical information about the route (date, names..) here")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slackline_anchor1}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slackline_anchor2}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.remarks}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.gear,placeholder:t.$gettext("Describe here the gear needed for this route")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.glacier_gear}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.external_resources,placeholder:t.$gettext("Books and websites not already associated to this route")}})],1)])],1)},n=[],a=i("1784"),o={mixins:[a["a"]]},r=o,l=i("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=d.exports},6718:function(t,e,i){var s=i("e53d"),n=i("584a"),a=i("b8e3"),o=i("ccb9"),r=i("d9f6").f;t.exports=function(t){var e=n.Symbol||(n.Symbol=a?{}:s.Symbol||{});"_"==t.charAt(0)||t in e||r(e,t,{value:o.f(t)})}},"67bb":function(t,e,i){t.exports=i("f921")},"67d2":function(t,e,i){"use strict";var s=i("ab4a"),n=i.n(s);n.a},"69d3":function(t,e,i){i("6718")("asyncIterator")},"6a6a":function(t,e,i){},"6abf":function(t,e,i){var s=i("e6f3"),n=i("1691").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,n)}},7228:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.editor}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.scale}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.code}})],1),i("hr")])},n=[],a=i("1784"),o={mixins:[a["a"]]},r=o,l=i("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=d.exports},"765d":function(t,e,i){i("6718")("observable")},"7c55":function(t,e,i){},8527:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section"},[i("html-header",{attrs:{title:t.$gettext("Versions")}}),i("loading-notification",{attrs:{promise:t.promise}}),t.history?i("div",[i("h1",{staticClass:"title is-1"},[i("icon-document",{attrs:{"document-type":t.documentType}}),i("router-link",{attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v(t._s(t.history.title))])],1),i("div",{staticClass:"buttons"},[i("diff-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}},[t._v("\n        Compare selected versions\n      ")]),i("router-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-link",attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v("\n        See the latest version\n      ")]),i("button",{staticClass:"button",attrs:{disabled:""}},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n          List of versions for language:\n        ")]),i("span",[t._v("\n           "+t._s(t.$gettext(t.lang,"langs"))+"\n        ")])])],1),i("table",{staticClass:"table is-striped"},[i("thead",[i("tr",[i("th"),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Created on")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Author")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")])])]),i("tbody",t._l(t.history.versions,function(e){return i("tr",{key:e.verion_id},[i("td",["profile"!=t.documentType?i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.versionFrom,expression:"versionFrom"}],attrs:{disabled:t.versionTo<=e.version_id,type:"radio",name:"versionFrom"},domProps:{value:e.version_id,checked:t._q(t.versionFrom,e.version_id)},on:{change:function(i){t.versionFrom=e.version_id}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.versionTo,expression:"versionTo"}],attrs:{disabled:t.versionFrom>=e.version_id,type:"radio",name:"versionTo"},domProps:{value:e.version_id,checked:t._q(t.versionTo,e.version_id)},on:{change:function(i){t.versionTo=e.version_id}}}),e.version_id!==t.veryFirstVersionId?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":"prev","version-to":e.version_id}}):t._e()],1):t._e()]),i("td",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:e.version_id,lang:t.lang}},[t._v("\n              "+t._s(t.$moment.toTechnicalString(e.written_at))+"\n            ")])],1),i("td",[i("contributor-link",{attrs:{contributor:e}})],1),i("td",[t._v("\n            "+t._s(e.comment)+"\n          ")])])}),0)]),i("div",{staticClass:"buttons"},[i("diff-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}},[t._v("\n        Compare selected versions\n      ")]),i("router-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-link",attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v("\n        See the latest version\n      ")])],1)]):t._e()],1)},n=[],a=(i("7f7f"),i("a481"),i("e814")),o=i.n(a),r=i("188b"),l={data:function(){return{promise:{},versionFrom:void 0,versionTo:void 0}},computed:{documentId:function(){return o()(this.$route.params.id)},documentType:function(){return this.$route.name.replace("-history","")},lang:function(){return this.$route.params.lang},veryFirstVersionId:function(){return this.history.versions[this.history.versions.length-1].version_id},history:function(){return this.promise.data}},watch:{$route:{handler:"load",immediate:!0}},methods:{load:function(){var t=this;this.promise=r["a"][this.documentType].getHistory(this.documentId,this.lang).then(function(e){var i=e.data.versions.reverse();e.data.versions=i,t.versionFrom=i[i.length>1?1:0].version_id,t.versionTo=i[0].version_id})}}},d=l,c=(i("44ec"),i("2877")),u=Object(c["a"])(d,s,n,!1,null,"614c23ae",null);e["default"]=u.exports},"85fb":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section content"},[i("html-header",{attrs:{title:t.$gettext("Differences between versions")}}),i("h1",[i("icon-document",{staticClass:"is-large",attrs:{"document-type":t.documentType}}),i("span",[t._v(" ")]),i("span",[t._v("diff")]),t._v(" ("+t._s(t.lang)+") :\n    "),i("router-link",{attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v(t._s(t.title))])],1),i("div",{staticClass:"columns"},[t.oldVersion?i("div",{staticClass:"column"},[i("div",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:t.oldVersion.version.version_id,lang:t.lang}},[t._v("\n          Revision #"+t._s(t.oldVersion.document.version)+" as of "+t._s(t.$moment.toTechnicalString(t.oldVersion.version.written_at))+"\n        ")])],1),i("div",[t._v("\n        by "),i("contributor-link",{attrs:{contributor:t.oldVersion.version}})],1),i("div",[t._v("\n        "+t._s(t.oldVersion.version.comment)+"\n      ")]),i("div",[t.oldVersion.previous_version_id?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.oldVersion.previous_version_id,"version-to":t.oldVersion.version.version_id}},[t._v("\n          ←\n          "),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("previous difference")])]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n          This is the first version\n        ")])],1)]):t._e(),t.newVersion?i("div",{staticClass:"column"},[i("div",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:t.newVersion.version.version_id,lang:t.lang}},[t._v("\n          Revision #"+t._s(t.newVersion.document.version)+" as of "+t._s(t.$moment.toTechnicalString(t.newVersion.version.written_at))+"\n        ")])],1),i("div",[t._v("\n        by "),i("contributor-link",{attrs:{contributor:t.newVersion.version}})],1),i("div",[t._v("\n        "+t._s(t.newVersion.version.comment)+"\n      ")]),i("div",[t.newVersion.next_version_id?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.newVersion.version.version_id,"version-to":t.newVersion.next_version_id}},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("next difference")]),t._v("\n          →\n        ")]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n          This is the last version\n        ")])],1)]):t._e()]),t.oldVersion&&t.newVersion?i("div",[t.geometryHasChanged?i("div",[i("map-view",{attrs:{"old-document":t.oldVersion.document,"new-document":t.newVersion.document}})],1):t._e(),t._l(Object.keys(t.diffProperties),function(e){return i("div",{key:e},[i("h2",{staticClass:"title is-2 has-text-centered"},[t._v(t._s(t.$gettext(e)))]),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-6"},[null===t.diffProperties[e].old?i("del",{staticClass:"is-pulled-right is-italic"},[t._v("null")]):i("del",{staticClass:"is-pulled-right"},[t._v(t._s(t.diffProperties[e].old))])]),i("div",{staticClass:"column is-6"},[null===t.diffProperties[e].new?i("ins",{staticClass:"is-italic"},[t._v("null")]):i("ins",[t._v(t._s(t.diffProperties[e].new))])])])])}),t._l(t.diffLocales,function(e,s){return i("div",{key:s},[i("h2",{staticClass:"title is-2 has-text-centered"},[t._v(t._s(t.$gettext(s)))]),i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column is-6"},[i("div",{staticClass:"splitted-diff"},t._l(e,function(e,s){return i("div",{key:s},[e.ellipsed?i("div",{staticClass:"block-ellipsed has-text-centered is-size-7 has-text-grey-light is-italic"},[t._v("\n                "+t._s(e.rows.length)+" identical rows\n              ")]):i("div",t._l(e.rows,function(e,s){return i("div",{key:s,staticClass:"row-diff",class:{"row-del":!e.isIdentical&&!e.isFakeOld,"row-fake":e.isFakeOld}},t._l(e.oldPart,function(e,s){return i(e.isIdentical?"span":"del",{key:s,tag:"component"},[t._v(t._s(e.text))])}),1)}),0)])}),0)]),i("div",{staticClass:"column is-6"},[i("div",{staticClass:"splitted-diff"},t._l(e,function(e,s){return i("div",{key:s},[e.ellipsed?i("div",{staticClass:"block-ellipsed has-text-centered is-size-7 has-text-grey-light is-italic"},[t._v("\n                "+t._s(e.rows.length)+" identical rows\n              ")]):i("div",t._l(e.rows,function(e,s){return i("div",{key:s,staticClass:"row-diff",class:{"row-ins":!e.isIdentical&&!e.isFakeNew,"row-fake":e.isFakeNew}},t._l(e.newPart,function(e,s){return i(e.isIdentical?"span":"ins",{key:s,tag:"component"},[t._v(t._s(e.text))])}),1)}),0)])}),0)])])])})],2):t._e()],1)},n=[],a=(i("aef6"),i("55dd"),i("6762"),i("2fdb"),i("a4bb")),o=i.n(a),r=(i("7f7f"),i("a481"),i("e814")),l=i.n(r),d=i("5d73"),c=i.n(d),u=(i("28a5"),i("85f2")),f=i.n(u),m=i("f499"),h=i.n(m),v=i("a745"),p=i.n(v),g=i("188b"),_=i("25c4"),b=i("5d58"),y=i.n(b),w=i("67bb"),C=i.n(w);function x(t){return x="function"===typeof C.a&&"symbol"===typeof y.a?function(t){return typeof t}:function(t){return t&&"function"===typeof C.a&&t.constructor===C.a&&t!==C.a.prototype?"symbol":typeof t},x(t)}function k(t){return k="function"===typeof C.a&&"symbol"===x(y.a)?function(t){return x(t)}:function(t){return t&&"function"===typeof C.a&&t.constructor===C.a&&t!==C.a.prototype?"symbol":x(t)},k(t)}i("4917"),i("c5f6");function $(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var E=-1,P=1,T=0;$.Diff,$.diff_main=function(t,e,i,s){"undefined"===typeof s&&(s=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var n=s;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[T,t]]:[];"undefined"===typeof i&&(i=!0);var a=i,o=this.diff_commonPrefix(t,e),r=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=this.diff_commonSuffix(t,e);var l=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var d=this.diff_compute_(t,e,a,n);return r&&d.unshift([T,r]),l&&d.push([T,l]),this.diff_cleanupMerge(d),d},$.diff_compute_=function(t,e,i,s){var n;if(!t)return[[P,e]];if(!e)return[[E,t]];var a=t.length>e.length?t:e,o=t.length>e.length?e:t,r=a.indexOf(o);if(-1!=r)return n=[[P,a.substring(0,r)],[T,o],[P,a.substring(r+o.length)]],t.length>e.length&&(n[0][0]=n[2][0]=E),n;if(1==o.length)return[[E,t],[P,e]];var l=this.diff_halfMatch_(t,e);if(l){var d=l[0],c=l[1],u=l[2],f=l[3],m=l[4],h=this.diff_main(d,u,i,s),v=this.diff_main(c,f,i,s);return h.concat([[T,m]],v)}return i&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,s):this.diff_bisect_(t,e,s)},$.diff_lineMode_=function(t,e,i){var s=this.diff_linesToChars_(t,e);t=s.chars1,e=s.chars2;var n=s.lineArray,a=this.diff_main(t,e,!1,i);this.diff_charsToLines_(a,n),this.diff_cleanupSemantic(a),a.push([T,""]);var o=0,r=0,l=0,d="",c="";while(o<a.length){switch(a[o][0]){case P:l++,c+=a[o][1];break;case E:r++,d+=a[o][1];break;case T:if(r>=1&&l>=1){a.splice(o-r-l,r+l),o=o-r-l;for(var u=this.diff_main(d,c,!1,i),f=u.length-1;f>=0;f--)a.splice(o,0,u[f]);o+=u.length}l=0,r=0,d="",c="";break}o++}return a.pop(),a},$.diff_bisect_=function(t,e,i){for(var s=t.length,n=e.length,a=Math.ceil((s+n)/2),o=a,r=2*a,l=new Array(r),d=new Array(r),c=0;c<r;c++)l[c]=-1,d[c]=-1;l[o+1]=0,d[o+1]=0;for(var u=s-n,f=u%2!=0,m=0,h=0,v=0,p=0,g=0;g<a;g++){if((new Date).getTime()>i)break;for(var _=-g+m;_<=g-h;_+=2){var b,y=o+_;b=_==-g||_!=g&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1;var w=b-_;while(b<s&&w<n&&t.charAt(b)==e.charAt(w))b++,w++;if(l[y]=b,b>s)h+=2;else if(w>n)m+=2;else if(f){var C=o+u-_;if(C>=0&&C<r&&-1!=d[C]){var x=s-d[C];if(b>=x)return this.diff_bisectSplit_(t,e,b,w,i)}}}for(var k=-g+v;k<=g-p;k+=2){var $=o+k,T=void 0;T=k==-g||k!=g&&d[$-1]<d[$+1]?d[$+1]:d[$-1]+1;var S=T-k;while(T<s&&S<n&&t.charAt(s-T-1)==e.charAt(n-S-1))T++,S++;if(d[$]=T,T>s)p+=2;else if(S>n)v+=2;else if(!f){var N=o+u-k;if(N>=0&&N<r&&-1!=l[N]){var M=l[N],L=o+M-N;if(T=s-T,M>=T)return this.diff_bisectSplit_(t,e,M,L,i)}}}}return[[E,t],[P,e]]},$.diff_bisectSplit_=function(t,e,i,s,n){var a=t.substring(0,i),o=e.substring(0,s),r=t.substring(i),l=e.substring(s),d=this.diff_main(a,o,!1,n),c=this.diff_main(r,l,!1,n);return d.concat(c)},$.diff_linesToChars_=function(t,e){var i=[],s={};function n(t){var e="",n=0,a=-1,o=i.length;while(a<t.length-1){a=t.indexOf("\n",n),-1==a&&(a=t.length-1);var r=t.substring(n,a+1);n=a+1,(s.hasOwnProperty?s.hasOwnProperty(r):void 0!==s[r])?e+=String.fromCharCode(s[r]):(e+=String.fromCharCode(o),s[r]=o,i[o++]=r)}return e}i[0]="";var a=n(t),o=n(e);return{chars1:a,chars2:o,lineArray:i}},$.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var s=t[i][1],n=[],a=0;a<s.length;a++)n[a]=e[s.charCodeAt(a)];t[i][1]=n.join("")}},$.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;var i=0,s=Math.min(t.length,e.length),n=s,a=0;while(i<n)t.substring(a,n)==e.substring(a,n)?(i=n,a=i):s=n,n=Math.floor((s-i)/2+i);return n},$.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;var i=0,s=Math.min(t.length,e.length),n=s,a=0;while(i<n)t.substring(t.length-n,t.length-a)==e.substring(e.length-n,e.length-a)?(i=n,a=i):s=n,n=Math.floor((s-i)/2+i);return n},$.diff_commonOverlap_=function(t,e){var i=t.length,s=e.length;if(0==i||0==s)return 0;i>s?t=t.substring(i-s):i<s&&(e=e.substring(0,i));var n=Math.min(i,s);if(t==e)return n;var a=0,o=1;while(o==o){var r=t.substring(n-o),l=e.indexOf(r);if(-1==l)return a;o+=l,0!=l&&t.substring(n-o)!=e.substring(0,o)||(a=o,o++)}},$.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var i=t.length>e.length?t:e,s=t.length>e.length?e:t;if(i.length<4||2*s.length<i.length)return null;var n=this;function a(t,e,i){var s,a,o,r,l=t.substring(i,i+Math.floor(t.length/4)),d=-1,c="";while(-1!=(d=e.indexOf(l,d+1))){var u=n.diff_commonPrefix(t.substring(i),e.substring(d)),f=n.diff_commonSuffix(t.substring(0,i),e.substring(0,d));c.length<f+u&&(c=e.substring(d-f,d)+e.substring(d,d+u),s=t.substring(0,i-f),a=t.substring(i+u),o=e.substring(0,d-f),r=e.substring(d+u))}return 2*c.length>=t.length?[s,a,o,r,c]:null}var o,r,l,d,c,u=a(i,s,Math.ceil(i.length/4)),f=a(i,s,Math.ceil(i.length/2));if(!u&&!f)return null;o=f?u&&u[4].length>f[4].length?u:f:u,t.length>e.length?(r=o[0],l=o[1],d=o[2],c=o[3]):(d=o[0],c=o[1],r=o[2],l=o[3]);var m=o[4];return[r,l,d,c,m]},$.diff_cleanupSemantic=function(t){var e=!1,i=[],s=0,n=null,a=0,o=0,r=0,l=0,d=0;while(a<t.length)t[a][0]==T?(i[s++]=a,o=l,r=d,l=0,d=0,n=t[a][1]):(t[a][0]==P?l+=t[a][1].length:d+=t[a][1].length,n&&n.length<=Math.max(o,r)&&n.length<=Math.max(l,d)&&(t.splice(i[s-1],0,[E,n]),t[i[s-1]+1][0]=P,s--,s--,a=s>0?i[s-1]:-1,o=0,r=0,l=0,d=0,n=null,e=!0)),a++;e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;while(a<t.length){if(t[a-1][0]==E&&t[a][0]==P){var c=t[a-1][1],u=t[a][1],f=this.diff_commonOverlap_(c,u),m=this.diff_commonOverlap_(u,c);f>=m?(f>=c.length/2||f>=u.length/2)&&(t.splice(a,0,[T,u.substring(0,f)]),t[a-1][1]=c.substring(0,c.length-f),t[a+1][1]=u.substring(f),a++):(m>=c.length/2||m>=u.length/2)&&(t.splice(a,0,[T,c.substring(0,m)]),t[a-1][0]=P,t[a-1][1]=u.substring(0,u.length-m),t[a+1][0]=E,t[a+1][1]=c.substring(m),a++),a++}a++}},$.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var i=t.charAt(t.length-1),s=e.charAt(0),n=i.match($.nonAlphaNumericRegex_),a=s.match($.nonAlphaNumericRegex_),o=n&&i.match($.whitespaceRegex_),r=a&&s.match($.whitespaceRegex_),l=o&&i.match($.linebreakRegex_),d=r&&s.match($.linebreakRegex_),c=l&&t.match($.blanklineEndRegex_),u=d&&e.match($.blanklineStartRegex_);return c||u?5:l||d?4:n&&!o&&r?3:o||r?2:n||a?1:0}var i=1;while(i<t.length-1){if(t[i-1][0]==T&&t[i+1][0]==T){var s=t[i-1][1],n=t[i][1],a=t[i+1][1],o=this.diff_commonSuffix(s,n);if(o){var r=n.substring(n.length-o);s=s.substring(0,s.length-o),n=r+n.substring(0,n.length-o),a=r+a}var l=s,d=n,c=a,u=e(s,n)+e(n,a);while(n.charAt(0)===a.charAt(0)){s+=n.charAt(0),n=n.substring(1)+a.charAt(0),a=a.substring(1);var f=e(s,n)+e(n,a);f>=u&&(u=f,l=s,d=n,c=a)}t[i-1][1]!=l&&(l?t[i-1][1]=l:(t.splice(i-1,1),i--),t[i][1]=d,c?t[i+1][1]=c:(t.splice(i+1,1),i--))}i++}},$.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,$.whitespaceRegex_=/\s/,$.linebreakRegex_=/[\r\n]/,$.blanklineEndRegex_=/\n\r?\n$/,$.blanklineStartRegex_=/^\r?\n\r?\n/,$.diff_cleanupEfficiency=function(t){var e=!1,i=[],s=0,n=null,a=0,o=!1,r=!1,l=!1,d=!1;while(a<t.length)t[a][0]==T?(t[a][1].length<this.Diff_EditCost&&(l||d)?(i[s++]=a,o=l,r=d,n=t[a][1]):(s=0,n=null),l=d=!1):(t[a][0]==E?d=!0:l=!0,n&&(o&&r&&l&&d||n.length<this.Diff_EditCost/2&&o+r+l+d==3)&&(t.splice(i[s-1],0,[E,n]),t[i[s-1]+1][0]=P,s--,n=null,o&&r?(l=d=!0,s=0):(s--,a=s>0?i[s-1]:-1,l=d=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},$.diff_cleanupMerge=function(t){t.push([T,""]);var e,i=0,s=0,n=0,a="",o="";while(i<t.length)switch(t[i][0]){case P:n++,o+=t[i][1],i++;break;case E:s++,a+=t[i][1],i++;break;case T:s+n>1?(0!==s&&0!==n&&(e=this.diff_commonPrefix(o,a),0!==e&&(i-s-n>0&&t[i-s-n-1][0]==T?t[i-s-n-1][1]+=o.substring(0,e):(t.splice(0,0,[T,o.substring(0,e)]),i++),o=o.substring(e),a=a.substring(e)),e=this.diff_commonSuffix(o,a),0!==e&&(t[i][1]=o.substring(o.length-e)+t[i][1],o=o.substring(0,o.length-e),a=a.substring(0,a.length-e))),0===s?t.splice(i-n,s+n,[P,o]):0===n?t.splice(i-s,s+n,[E,a]):t.splice(i-s-n,s+n,[E,a],[P,o]),i=i-s-n+(s?1:0)+(n?1:0)+1):0!==i&&t[i-1][0]==T?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,n=0,s=0,a="",o="";break}""===t[t.length-1][1]&&t.pop();var r=!1;i=1;while(i<t.length-1)t[i-1][0]==T&&t[i+1][0]==T&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),r=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),r=!0)),i++;r&&this.diff_cleanupMerge(t)},$.diff_xIndex=function(t,e){var i,s=0,n=0,a=0,o=0;for(i=0;i<t.length;i++){if(t[i][0]!==P&&(s+=t[i][1].length),t[i][0]!==E&&(n+=t[i][1].length),s>e)break;a=s,o=n}return t.length!=i&&t[i][0]===E?o:o+(e-a)},$.diff_prettyHtml=function(t){for(var e=[],i=/&/g,s=/</g,n=/>/g,a=/\n/g,o=0;o<t.length;o++){var r=t[o][0],l=t[o][1],d=l.replace(i,"&amp;").replace(s,"&lt;").replace(n,"&gt;").replace(a,"&para;<br>");switch(r){case P:e[o]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case E:e[o]='<del style="background:#ffe6e6;">'+d+"</del>";break;case T:e[o]="<span>"+d+"</span>";break}}return e.join("")},$.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==P&&(e[i]=t[i][1]);return e.join("")},$.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==E&&(e[i]=t[i][1]);return e.join("")},$.diff_levenshtein=function(t){for(var e=0,i=0,s=0,n=0;n<t.length;n++){var a=t[n][0],o=t[n][1];switch(a){case P:i+=o.length;break;case E:s+=o.length;break;case T:e+=Math.max(i,s),i=0,s=0;break}}return e+=Math.max(i,s),e},$.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case P:e[i]="+"+encodeURI(t[i][1]);break;case E:e[i]="-"+t[i][1].length;break;case T:e[i]="="+t[i][1].length;break}return e.join("\t").replace(/%20/g," ")},$.diff_fromDelta=function(t,e){for(var i=[],s=0,n=0,a=e.split(/\t/g),o=0;o<a.length;o++){var r=a[o].substring(1);switch(a[o].charAt(0)){case"+":try{i[s++]=[P,decodeURI(r)]}catch(u){throw new Error("Illegal escape in diff_fromDelta: "+r)}break;case"-":case"=":var d=l()(r,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+r);var c=t.substring(n,n+=d);"="==a[o].charAt(0)?i[s++]=[T,c]:i[s++]=[E,c];break;default:if(a[o])throw new Error("Invalid diff operation in diff_fromDelta: "+a[o])}}if(n!=t.length)throw new Error("Delta length ("+n+") does not equal source text length ("+t.length+").");return i},$.match_main=function(t,e,i){if(null==t||null==e||null==i)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==e?0:t.length?t.substring(i,i+e.length)==e?i:this.match_bitap_(t,e,i):-1},$.match_bitap_=function(t,e,i){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var s=this.match_alphabet_(e),n=this;function a(t,s){var a=t/e.length,o=Math.abs(i-s);return n.Match_Distance?a+o/n.Match_Distance:o?1:a}var o=this.Match_Threshold,r=t.indexOf(e,i);-1!=r&&(o=Math.min(a(0,r),o),r=t.lastIndexOf(e,i+e.length),-1!=r&&(o=Math.min(a(0,r),o)));var l,d,c=1<<e.length-1;r=-1;for(var u,f=e.length+t.length,m=0;m<e.length;m++){l=0,d=f;while(l<d)a(m,i+d)<=o?l=d:f=d,d=Math.floor((f-l)/2+l);f=d;var h=Math.max(1,i-d+1),v=Math.min(i+d,t.length)+e.length,p=Array(v+2);p[v+1]=(1<<m)-1;for(var g=v;g>=h;g--){var _=s[t.charAt(g-1)];if(p[g]=0===m?(p[g+1]<<1|1)&_:(p[g+1]<<1|1)&_|(u[g+1]|u[g])<<1|1|u[g+1],p[g]&c){var b=a(m,g-1);if(b<=o){if(o=b,r=g-1,!(r>i))break;h=Math.max(1,2*i-r)}}}if(a(m+1,i)>o)break;u=p}return r},$.match_alphabet_=function(t){for(var e={},i=0;i<t.length;i++)e[t.charAt(i)]=0;for(var s=0;s<t.length;s++)e[t.charAt(s)]|=1<<t.length-s-1;return e},$.patch_addContext_=function(t,e){if(0!=e.length){var i=e.substring(t.start2,t.start2+t.length1),s=0;while(e.indexOf(i)!=e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)s+=this.Patch_Margin,i=e.substring(t.start2-s,t.start2+t.length1+s);s+=this.Patch_Margin;var n=e.substring(t.start2-s,t.start2);n&&t.diffs.unshift([T,n]);var a=e.substring(t.start2+t.length1,t.start2+t.length1+s);a&&t.diffs.push([T,a]),t.start1-=n.length,t.start2-=n.length,t.length1+=n.length+a.length,t.length2+=n.length+a.length}},$.patch_make=function(t,e,i){var s,n;if("string"===typeof t&&"string"===typeof e&&"undefined"===typeof i)s=t,n=this.diff_main(s,e,!0),n.length>2&&(this.diff_cleanupSemantic(n),this.diff_cleanupEfficiency(n));else if(t&&"object"===k(t)&&"undefined"===typeof e&&"undefined"===typeof i)n=t,s=this.diff_text1(n);else if("string"===typeof t&&e&&"object"===k(e)&&"undefined"===typeof i)s=t,n=e;else{if("string"!==typeof t||"string"!==typeof e||!i||"object"!==k(i))throw new Error("Unknown call format to patch_make.");s=t,n=i}if(0===n.length)return[];for(var a=[],o=new $.patch_obj,r=0,l=0,d=0,c=s,u=s,f=0;f<n.length;f++){var m=n[f][0],h=n[f][1];switch(r||m===T||(o.start1=l,o.start2=d),m){case P:o.diffs[r++]=n[f],o.length2+=h.length,u=u.substring(0,d)+h+u.substring(d);break;case E:o.length1+=h.length,o.diffs[r++]=n[f],u=u.substring(0,d)+u.substring(d+h.length);break;case T:h.length<=2*this.Patch_Margin&&r&&n.length!=f+1?(o.diffs[r++]=n[f],o.length1+=h.length,o.length2+=h.length):h.length>=2*this.Patch_Margin&&r&&(this.patch_addContext_(o,c),a.push(o),o=new $.patch_obj,r=0,c=u,l=d);break}m!==P&&(l+=h.length),m!==E&&(d+=h.length)}return r&&(this.patch_addContext_(o,c),a.push(o)),a},$.patch_deepCopy=function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i],n=new $.patch_obj;n.diffs=[];for(var a=0;a<s.diffs.length;a++)n.diffs[a]=s.diffs[a].slice();n.start1=s.start1,n.start2=s.start2,n.length1=s.length1,n.length2=s.length2,e[i]=n}return e},$.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var s=0,n=[],a=0;a<t.length;a++){var o,r,l=t[a].start2+s,d=this.diff_text1(t[a].diffs),c=-1;if(d.length>this.Match_MaxBits?(o=this.match_main(e,d.substring(0,this.Match_MaxBits),l),-1!=o&&(c=this.match_main(e,d.substring(d.length-this.Match_MaxBits),l+d.length-this.Match_MaxBits),(-1==c||o>=c)&&(o=-1))):o=this.match_main(e,d,l),-1==o)n[a]=!1,s-=t[a].length2-t[a].length1;else if(n[a]=!0,s=o-l,r=-1==c?e.substring(o,o+d.length):e.substring(o,c+this.Match_MaxBits),d==r)e=e.substring(0,o)+this.diff_text2(t[a].diffs)+e.substring(o+d.length);else{var u=this.diff_main(d,r,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(u)/d.length>this.Patch_DeleteThreshold)n[a]=!1;else{this.diff_cleanupSemanticLossless(u);for(var f,m=0,h=0;h<t[a].diffs.length;h++){var v=t[a].diffs[h];v[0]!==T&&(f=this.diff_xIndex(u,m)),v[0]===P?e=e.substring(0,o+f)+v[1]+e.substring(o+f):v[0]===E&&(e=e.substring(0,o+f)+e.substring(o+this.diff_xIndex(u,m+v[1].length))),v[0]!==E&&(m+=v[1].length)}}}}return e=e.substring(i.length,e.length-i.length),[e,n]},$.patch_addPadding=function(t){for(var e=this.Patch_Margin,i="",s=1;s<=e;s++)i+=String.fromCharCode(s);for(var n=0;n<t.length;n++)t[n].start1+=e,t[n].start2+=e;var a=t[0],o=a.diffs;if(0==o.length||o[0][0]!=T)o.unshift([T,i]),a.start1-=e,a.start2-=e,a.length1+=e,a.length2+=e;else if(e>o[0][1].length){var r=e-o[0][1].length;o[0][1]=i.substring(o[0][1].length)+o[0][1],a.start1-=r,a.start2-=r,a.length1+=r,a.length2+=r}if(a=t[t.length-1],o=a.diffs,0==o.length||o[o.length-1][0]!=T)o.push([T,i]),a.length1+=e,a.length2+=e;else if(e>o[o.length-1][1].length){var l=e-o[o.length-1][1].length;o[o.length-1][1]+=i.substring(0,l),a.length1+=l,a.length2+=l}return i},$.patch_splitMax=function(t){for(var e=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=e)){var s=t[i];t.splice(i--,1);var n=s.start1,a=s.start2,o="";while(0!==s.diffs.length){var r=new $.patch_obj,l=!0;r.start1=n-o.length,r.start2=a-o.length,""!==o&&(r.length1=r.length2=o.length,r.diffs.push([T,o]));while(0!==s.diffs.length&&r.length1<e-this.Patch_Margin){var d=s.diffs[0][0],c=s.diffs[0][1];d===P?(r.length2+=c.length,a+=c.length,r.diffs.push(s.diffs.shift()),l=!1):d===E&&1==r.diffs.length&&r.diffs[0][0]==T&&c.length>2*e?(r.length1+=c.length,n+=c.length,l=!1,r.diffs.push([d,c]),s.diffs.shift()):(c=c.substring(0,e-r.length1-this.Patch_Margin),r.length1+=c.length,n+=c.length,d===T?(r.length2+=c.length,a+=c.length):l=!1,r.diffs.push([d,c]),c==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(c.length))}o=this.diff_text2(r.diffs),o=o.substring(o.length-this.Patch_Margin);var u=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==u&&(r.length1+=u.length,r.length2+=u.length,0!==r.diffs.length&&r.diffs[r.diffs.length-1][0]===T?r.diffs[r.diffs.length-1][1]+=u:r.diffs.push([T,u])),l||t.splice(++i,0,r)}}},$.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},$.patch_fromText=function(t){var e=[];if(!t)return e;var i=t.split("\n"),s=0,n=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(s<i.length){var a=i[s].match(n);if(!a)throw new Error("Invalid patch string: "+i[s]);var o=new $.patch_obj;e.push(o),o.start1=l()(a[1],10),""===a[2]?(o.start1--,o.length1=1):"0"==a[2]?o.length1=0:(o.start1--,o.length1=l()(a[2],10)),o.start2=l()(a[3],10),""===a[4]?(o.start2--,o.length2=1):"0"==a[4]?o.length2=0:(o.start2--,o.length2=l()(a[4],10)),s++;while(s<i.length){var r=i[s].charAt(0);try{var d=decodeURI(i[s].substring(1))}catch(c){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==r)o.diffs.push([E,d]);else if("+"==r)o.diffs.push([P,d]);else if(" "==r)o.diffs.push([T,d]);else{if("@"==r)break;if(""!==r)throw new Error('Invalid patch mode "'+r+'" in: '+d)}s++}}return e},$.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},$.patch_obj.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var i,s=["@@ -"+t+" +"+e+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case P:i="+";break;case E:i="-";break;case T:i=" ";break}s[n+1]=i+encodeURI(this.diffs[n][1])+"\n"}return s.join("").replace(/%20/g," ")};var S=function(t){return"Point"===t.type&&p()(t.coordinates)&&2===t.coordinates.length},N=function(t,e){if(t===e)return!1;if(null===t||null===e)return!0;var i=JSON.parse(t),s=JSON.parse(e);return!S(i)||!S(s)||(i.coordinates[0]!==s.coordinates[0]||i.coordinates[1]!==s.coordinates[1])},M=function(t,e){return p()(t)||p()(e)?h()(t)!==h()(e):null===t&&null!==e||null!==t&&null===e||t!==e},L=function(t,e){for(var i=0;i<t.length;i++)0===t[i][0]?e(t[i][1],t[i][1],!0):1===t[i][0]?e(null,t[i][1],!1):-1===t[i][0]&&(i+1<t.length&&1===t[i+1][0]?(e(t[i][1],t[i+1][1],!1),i+=1):e(t[i][1],null,!1))},j=function(t,e){this.text=t,this.isIdentical=e},O=function(t,e,i){if(this.oldPart=[],this.newPart=[],this.ellipsed=!0,this.isIdentical=i,i)this.oldPart=[new j(t,!0)],this.newPart=this.oldPart;else if(void 0===t)this.newPart.push(new j(e,!1));else if(void 0===e)this.oldPart.push(new j(t,!1));else{var s=$.diff_main(t,e);L(s,this.addItem.bind(this))}};f()(O.prototype,"isFakeOld",{get:function(){return 0===this.oldPart.length}}),f()(O.prototype,"isFakeNew",{get:function(){return 0===this.newPart.length}}),O.prototype.addItem=function(t,e,i){if(i){var s=new j(t,!0);this.oldPart.push(s),this.newPart.push(s)}else void 0!==t&&this.oldPart.push(new j(t,!1)),void 0!==e&&this.newPart.push(new j(e,!1))};var V=function(t,e){this.items=[]};V.prototype.build=function(t,e){var i=$.diff_linesToChars_(t,e),s=$.diff_main(i.chars1,i.chars2,!1);$.diff_charsToLines_(s,i.lineArray),L(s,this.add.bind(this))},V.prototype.add=function(t,e,i){var s=this.items;if(i){var n=t.split("\n"),a=!0,o=!1,r=void 0;try{for(var l,d=c()(n.slice(0,n.length-1));!(a=(l=d.next()).done);a=!0){var u=l.value;s.push(new O(u,u,!0))}}catch(m){o=!0,r=m}finally{try{a||null==d.return||d.return()}finally{if(o)throw r}}}else{t=null!==t?t.split("\n"):[],e=null!==e?e.split("\n"):[];for(var f=0;f<Math.max(t.length-1,e.length-1);f++)s.push(new O(t[f],e[f],!1))}},V.prototype.computeEllipsisStates=function(){for(var t=this.items,e=0;e<t.length;e++)if(!t[e].isIdentical)for(var i=Math.max(0,e-2);i<=Math.min(t.length-1,e+2);i++)t[i].ellipsed=!1};var D={data:function(){return{title:null,oldVersion:null,newVersion:null,diffProperties:{},diffLocales:{}}},computed:{documentId:function(){return l()(this.$route.params.id)},documentType:function(){return this.$route.name.replace("-diff","")},lang:function(){return this.$route.params.lang},geoLocalized:function(){return _["a"].objectDefinitions[this.documentType].geoLocalized},geometryHasChanged:function(){if(!this.geoLocalized&&"area"!==this.documentType)return!1;var t=this.oldVersion.document.geometry,e=this.newVersion.document.geometry;return!!N(t.geom,e.geom)||t.geom_detail!==e.geom_detail}},watch:{$route:{handler:"loadVersions",immediate:!0}},methods:{loadVersions:function(){this.loadVersion(this.$route.params.versionFrom,"oldVersion"),this.loadVersion(this.$route.params.versionTo,"newVersion")},getKeys:function(t,e,i){var s=o()(t).concat(o()(e));return i=i||[],s=s.filter(function(t,e,s){return s.indexOf(t)===e&&!i.includes(t)}),s.sort(),s},buildDiff:function(){if(this.diffProperties={},this.diffLocales={},!this.oldVersion||!this.newVersion)return"Waiting for other version";var t=this.getKeys(this.oldVersion.document,this.newVersion.document,["version","locales","geometry","cooked"]),e=!0,i=!1,s=void 0;try{for(var n,a=c()(t);!(e=(n=a.next()).done);e=!0){var o=n.value;M(this.oldVersion.document[o],this.newVersion.document[o])&&(this.diffProperties[o]={old:this.oldVersion.document[o],new:this.newVersion.document[o]})}}catch(N){i=!0,s=N}finally{try{e||null==a.return||a.return()}finally{if(i)throw s}}var r=this.$documentUtils.getLocaleStupid(this.oldVersion.document,this.lang),l=this.$documentUtils.getLocaleStupid(this.newVersion.document,this.lang),d=this.getKeys(r,l,["lang","version"]),u=function(t){return t=t||"",t=t.replace(/\r\n?/g,"\n"),t+=t.endsWith("\n")?"":"\n",t},f=!0,m=!1,h=void 0;try{for(var v,p=c()(d);!(f=(v=p.next()).done);f=!0){var g=v.value,_=u(r[g]),b=u(l[g]);if(M(_,b)){var y=new V;y.build(_,b),y.computeEllipsisStates();var w=function(t){this.rows=[],this.ellipsed=t},C=[new w(y.items[0].ellipsed)],x=C[0],k=!0,$=!1,E=void 0;try{for(var P,T=c()(y.items);!(k=(P=T.next()).done);k=!0){var S=P.value;x.ellipsed!==S.ellipsed&&(x=new w(S.ellipsed),C.push(x)),x.rows.push(S)}}catch(N){$=!0,E=N}finally{try{k||null==T.return||T.return()}finally{if($)throw E}}this.diffLocales[g]=C}}}catch(N){m=!0,h=N}finally{try{f||null==p.return||p.return()}finally{if(m)throw h}}},loadVersion:function(t,e){var i=this;if(this[e]=null,"prev"!==t&&"next"!==t)return g["a"][this.documentType].getVersion(this.documentId,this.lang,t).then(function(t){i[e]=t.data,"prev"===i.$route.params.versionFrom&&"newVersion"===e&&i.loadVersion(i.newVersion.previous_version_id,"oldVersion"),"next"===i.$route.params.versionTo&&"oldVersion"===e&&i.loadVersion(i.newVersion.next_version_id,"newVersion"),"newVersion"===e&&(i.title=i.$documentUtils.getLocaleStupid(i.newVersion.document,i.lang).title),i.buildDiff()})}}},I=D,A=(i("c8a3"),i("2877")),q=Object(A["a"])(I,s,n,!1,null,"65bc8314",null);e["default"]=q.exports},"8d8a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Main informations about your outing")}},[i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_start,max:t.showBothDates?t.document.date_end:void 0},on:{input:t.handleDates}}),i("form-field",{directives:[{name:"show",rawName:"v-show",value:t.showBothDates,expression:"showBothDates"}],staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_end,min:t.showBothDates?t.document.date_start:void 0}}),i("div",{staticClass:"column is-narrow"},[i("input-checkbox",{model:{value:t.showBothDates,callback:function(e){t.showBothDates=e},expression:"showBothDates"}},[t._v(t._s(t.$gettext("Several days?")))])],1)],1),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.activities}})],1),i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}}),i("associations-input-row",{attrs:{label:t.$gettext("routes"),document:t.document,field:t.fields.routes}}),i("div",{staticClass:"columns is-multiline"},[i("form-field",{attrs:{document:t.document,field:t.fields.title}}),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.partial_trip}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_description,placeholder:t.$gettext("describe route_conditions")}})],1)],1),i("form-section",{attrs:{title:t.$gettext("Weather & conditions"),"sub-title":t.$gettext("Describe the conditions you encountered during your outing")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.condition_rating}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.glacier_rating}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions_levels}})],1),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.elevation_up_snow}}),i("form-field",{attrs:{document:t.document,field:t.fields.elevation_down_snow}})],1),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.snow_quantity}}),i("form-field",{attrs:{document:t.document,field:t.fields.snow_quality}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions,placeholder:t.$gettext("describe conditions")}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.weather,placeholder:t.$gettext("describe weather")}}),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.timing,placeholder:t.$gettext("describe timing")}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.avalanche_signs}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.avalanches}})],1)]),i("form-section",{attrs:{title:t.$gettext("Personal informations"),"sub-title":t.$gettext("People who were with you, and your feelings about this outing")}},[i("associations-input-row",{attrs:{label:t.$gettext("participants"),document:t.document,field:t.fields.users}}),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.participant_count}}),i("form-field",{attrs:{document:t.document,field:t.fields.participants,placeholder:t.$gettext("Without c2c account")}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,label:t.$gettext("personal comments"),placeholder:t.$gettext("write your comments")}}),i("form-field",{attrs:{document:t.document,field:t.fields.disable_comments}})],1)],1),i("form-section",{attrs:{title:t.$gettext("Details"),"sub-title":t.$gettext("Detailed figures, like ratings, height differences, frequentation...")}},[i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.frequentation}})],1),i("div",{staticClass:"columns is-multiline"},[i("div",{staticClass:"column is-4"},[i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.elevation_access}}),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.access_condition}}),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.public_transport}})],1),i("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.access_comment}}),i("div",{staticClass:"column is-4"},[i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.lift_status}}),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.hut_status}})],1),i("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.hut_comment}})],1),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_up}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_down}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_difficulties}})],1),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.length_total,unit:"km",divisor:1e3}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.elevation_min}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.elevation_max}})],1),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.global_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rock_free_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.engagement_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.equipment_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ski_rating,prefix:"?"},on:{"click:prefix":t.showCotometer}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.labande_global_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ice_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.snowshoe_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.via_ferrata_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.hiking_rating}})],1),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_down_rating}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_up_rating}})],1)]),t.document?i("cotometer-window",{ref:"cotometerWindow",model:{value:t.document.ski_rating,callback:function(e){t.$set(t.document,"ski_rating",e)},expression:"document.ski_rating"}}):t._e()],1)},n=[],a=i("1784"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal-card",{ref:"modalWindow"},[i("span",{attrs:{slot:"title"},slot:"title"},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n      This tool estimates the technical difficulty of a ski route (ski rating).\n    ")])]),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("Skiability")]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{id:"c2c-skiability-0",name:"c2c-skiability",type:"radio"},domProps:{value:0,checked:t._q(t.skiability,0)},on:{change:function(e){t.skiability=0}}}),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-0"}},[t._v("Wide and constant")])]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{type:"radio",id:"c2c-skiability-1",name:"c2c-skiability"},domProps:{value:.1,checked:t._q(t.skiability,.1)},on:{change:function(e){t.skiability=.1}}}),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-1"}},[t._v("1 or 2 complications (steeper or narrow section...)")])]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{type:"radio",id:"c2c-skiability-2",name:"c2c-skiability"},domProps:{value:.2,checked:t._q(t.skiability,.2)},on:{change:function(e){t.skiability=.2}}}),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-2"}},[t._v("Very complex (steps, narrow sections, ridges...)")])])]),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("Average slope (degrees)")]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.slope,expression:"slope"}],staticClass:"input",attrs:{placeholder:t.$gettext("Average slope in degree"),type:"number"},domProps:{value:t.slope},on:{input:function(e){e.target.composing||(t.slope=e.target.value)}}})]),t.errorSlope?i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"help is-danger"},[t._v("The slope must be between 0 and 80 deg")]):t._e()]),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("height_diff")]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.elevation,expression:"elevation"}],staticClass:"input",attrs:{type:"number",min:"50",max:"3000"},domProps:{value:t.elevation},on:{input:function(e){e.target.composing||(t.elevation=e.target.value)}}})]),t.errorElevation?i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"help is-danger"},[t._v("The slope must be between 50 and 3000m high")]):t._e()]),t.rating?i("h1",{staticClass:"title is-1 has-text-centered"},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Suggested rating")]),i("br"),i("span",{staticClass:"has-text-success"},[t._v("\n      "+t._s(t.rating)+"\n    ")])]):t._e(),i("footer",{attrs:{slot:"footer"},slot:"footer"},[i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-success",attrs:{type:"button",disabled:!t.rating},on:{click:t.setResult}},[t._v("\n      Ok\n    ")]),i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-default",attrs:{type:"button"},on:{click:function(e){return t.$refs.modalWindow.hide()}}},[t._v("\n      Cancel\n    ")])])])},r=[],l={data:function(){return{skiability:0,slope:null,elevation:50}},computed:{errorSlope:function(){return isNaN(this.slope)||this.slope<0||this.slope>80},errorElevation:function(){return(isNaN(this.elevation)||this.elevation<50||this.elevation>3e3)&&null!==this.elevation},rating:function(){if(this.errorSlope||this.errorElevation)return null;var t=Math.tan(Math.PI*this.slope/180)+.1*Math.log(this.elevation);t+=this.skiability*(t-1);var e=(1+this.skiability)*this.elevation;return this.slope<=17&&e<400?"1.1":this.slope<=23&&e<650?"1.2":this.slope<30&&e<800?"1.3":this.slope<35&&e<800||this.slope<23&&e>800?"2.1":this.slope<35&&e<=950?"2.2":this.slope<35&&e>950?"2.3":this.slope>=35&&this.slope<=40&&e<650?"3.1":this.slope>=35&&this.slope<=40&&e<=900?"3.2":this.slope>=35&&this.slope<=40&&e>900?"3.3":t<.98?"1.1":t>=.98&&t<1.02?"1.2":t>=1.03&&t<1.09?"+1.3":t>=1.09&&t<1.18?"+2.1":t>=1.18&&t<1.24?"2.2":t>=1.24&&t<1.3?"2.3":t>=1.3&&t<1.34?"3.1":t>=1.34&&t<1.39?"3.2":t>=1.39&&t<1.42?"3.3":t>=1.42&&t<1.46?"4.1":t>=1.46&&t<1.52?"4.2":t>=1.52&&t<1.575?"4.3":t>=1.575&&t<1.67?"5.1":t>=1.67&&t<1.745?"5.2":t>=1.745&&t<1.81?"5.3":t>=1.81&&t<1.95?"5.4":t>=1.95&&t<2.09?"5.5":t>=2.09&&t<2.25?"5.6":t>=2.25&&t<2.4?"5.7":"5.8"}},methods:{show:function(){this.$refs.modalWindow.show()},setResult:function(){this.$emit("input",this.rating),this.$refs.modalWindow.hide()}}},d=l,c=i("2877"),u=Object(c["a"])(d,o,r,!1,null,null,null),f=u.exports,m={components:{CotometerWindow:f},mixins:[a["a"]],data:function(){return{showBothDates:!1}},methods:{afterLoad:function(){this.showBothDates=this.document.date_start!==this.document.date_end},handleDates:function(){this.showBothDates||(this.document.date_end=this.document.date_start)},beforeSave:function(){this.handleDates()},showCotometer:function(){this.$refs.cotometerWindow.show()}}},h=m,v=Object(c["a"])(h,s,n,!1,null,null,null);e["default"]=v.exports},9181:function(t,e,i){},"9ab4":function(t,e,i){},ab4a:function(t,e,i){},ae0a:function(t,e,i){"use strict";var s=i("2189"),n=i.n(s);n.a},b7ea:function(t,e,i){"use strict";var s=i("9ab4"),n=i.n(s);n.a},bda5:function(t,e,i){"use strict";var s=i("6a6a"),n=i.n(s);n.a},bf0b:function(t,e,i){var s=i("355d"),n=i("aebd"),a=i("36c3"),o=i("1bc3"),r=i("07e3"),l=i("794b"),d=Object.getOwnPropertyDescriptor;e.f=i("8e60")?d:function(t,e){if(t=a(t),e=o(e,!0),l)try{return d(t,e)}catch(i){}if(r(t,e))return n(!s.f.call(t,e),t[e])}},c8a3:function(t,e,i){"use strict";var s=i("9181"),n=i.n(s);n.a},ccb9:function(t,e,i){e.f=i("5168")},d8d6f:function(t,e,i){i("1654"),i("6c1c"),t.exports=i("ccb9").f("iterator")},e1e4:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section content"},[i("html-header",{attrs:{title:"Recents changes"}}),i("table",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],attrs:{"infinite-scroll-disabled":"disableInfiniteSCroll","infinite-scroll-distance":"100"}},[i("tr",[i("th",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"modification date"}},[t._v("Modified the")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Author")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Links")]),i("th"),i("th",[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("title")]),t._v("\n        :\n        "),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")])])]),t._l(t.feed,function(e,s){return i("tr",{key:s},[i("td",[i("version-link",{attrs:{"document-type":e.document.documentType,id:e.document.document_id,version:e.version_id,lang:e.lang}},[t._v("\n          "+t._s(t.$moment.toTechnicalString(e.written_at))+"\n        ")])],1),i("td",[i("contributor-link",{attrs:{contributor:e.user}})],1),i("td",[i("document-link",{attrs:{document:e.document,lang:e.lang}},[t._v("\n          last\n        ")]),i("diff-link",{attrs:{"document-type":e.document.documentType,id:e.document.document_id,lang:e.lang,"version-from":"prev","version-to":e.version_id}}),i("history-link",{attrs:{document:e.document,lang:e.lang}})],1),i("td",[i("marker-quality",{attrs:{quality:e.document.quality}}),t._v("\n        "+t._s(e.lang)+"\n      ")],1),i("td",[i("icon-document",{attrs:{"document-type":e.document.documentType}}),t._v("\n        "+t._s(e.document.title)+"\n        :\n        "),e.comment?i("span",[t._v("\n          "+t._s(e.comment)+"\n        ")]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n          empty comment\n        ")])],1)])})],2),i("loading-notification",{attrs:{promise:t.promise}})],1)},n=[],a=i("5d73"),o=i.n(a),r=i("5176"),l=i.n(r),d=i("487a"),c=i.n(d),u=i("188b"),f={directives:{infiniteScroll:c.a},data:function(){return{promise:{},feed:[],endOfFeed:!1}},computed:{loading:function(){return!!this.promise&&this.promise.loading},disableInfiniteSCroll:function(){return this.loading||this.endOfFeed},nextQuery:function(){return this.promise.data?l()({},this.$route.query,{token:this.promise.data.pagination_token}):this.$route.query}},watch:{$route:{handler:"initialize",immediate:!0}},methods:{initialize:function(){this.feed=[],this.endOfFeed=!1,this.load()},load:function(){this.promise&&this.promise.loading||this.endOfFeed||(this.promise=u["a"].getRecentChanges(this.nextQuery).then(this.onLoad))},onLoad:function(){var t=!0,e=!1,i=void 0;try{for(var s,n=o()(this.promise.data.feed);!(t=(s=n.next()).done);t=!0){var a=s.value;a.document.documentType=this.$documentUtils.getDocumentType(a.document.type),this.feed.push(a)}}catch(r){e=!0,i=r}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}this.endOfFeed=0===this.promise.data.feed.length,this.$nextTick(this.onScroll)}}},m=f,h=(i("2fea"),i("2877")),v=Object(h["a"])(m,s,n,!1,null,"4d2a57b0",null);e["default"]=v.exports},f11a:function(t,e,i){"use strict";var s=i("596f"),n=i.n(s);n.a},f921:function(t,e,i){i("014b"),i("c207"),i("69d3"),i("765d"),t.exports=i("584a").Symbol},fadd:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"generic-errors":t.genericErrors,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Title, activity and characteristics of the picture")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{attrs:{document:t.document,field:t.fields.title}}),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.image_type}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author}}),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_time}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.categories}}),i("div",{staticClass:"column is-6"},[i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.filename}}),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.file_size}}),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.height}}),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.width}})],1),"edit"===t.mode&&t.document?i("div",{staticClass:"column is-6 has-text-centered"},[i("img",{attrs:{src:t.getImageUrl(t.document)}})]):t._e()],1)]),i("form-section",{attrs:{title:t.$gettext("geolocation"),"sub-title":t.$gettext("Precise localisation of the shooting")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation}})],1),i("map-input-row",{attrs:{document:t.document}})],1),i("form-section",{attrs:{title:t.$gettext("camera settings"),"sub-title":t.$gettext("Parameters of the Digital Camera")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.camera_name}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.fnumber}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.focal_length}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.exposure_time}}),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.iso_speed}})],1)]),i("form-section",{attrs:{title:t.$gettext("Detailed information"),"sub-title":t.$gettext("Open fields to detail the picture's context")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1)]),i("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("Articles, waypoints, routes or books to be linked.")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)},n=[],a=i("e952"),o=i("1784"),r={mixins:[o["a"]],methods:{getImageUrl:a["a"].getMedium}},l=r,d=i("2877"),c=Object(d["a"])(l,s,n,!1,null,null,null);e["default"]=c.exports},fc29:function(t,e,i){}}]);
//# sourceMappingURL=wiki-tools.8d06fc2f.js.map